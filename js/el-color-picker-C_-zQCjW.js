var qe=Object.defineProperty,Xe=Object.defineProperties;var Ye=Object.getOwnPropertyDescriptors;var pe=Object.getOwnPropertySymbols;var je=Object.prototype.hasOwnProperty,Ue=Object.prototype.propertyIsEnumerable;var me=(e,a,l)=>a in e?qe(e,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[a]=l,U=(e,a)=>{for(var l in a||(a={}))je.call(a,l)&&me(e,l,a[l]);if(pe)for(var l of pe(a))Ue.call(a,l)&&me(e,l,a[l]);return e},te=(e,a)=>Xe(e,Ye(a));import{bj as ge,c as S,f as C,x as Z,D as V,B as ee,d as K,a as D,o as A,g as w,u as n,e as H,n as b,bV as ae,bS as be,F as Ge,q as Je,A as xe,bL as Qe,H as Ze,l as le,w as W,R as et,k as oe,h as P,v as _e,J as tt,b as ke,i as Ce,t as ye,S as G,z as at}from"./index-C8EcO_R4.js";import{b as Ve,d as Ae,a3 as lt,y as Le,u as q,N as we,_ as X,ac as ne,an as ot,aB as J,ax as nt,O as rt,aG as st,ap as it,f as Ee,D as ut,ai as ct,E as Se,w as dt}from"./_plugin-vue_export-helper-DAE0c8RX.js";import{e as F,C as se,U as x,q as ft,d as ht,A as vt,a as pt,E as mt,o as $e}from"./el-input-B5lZdLQh.js";import{d as gt,C as bt}from"./el-select-CaBiTLQY.js";const _t=Ve({color:{type:Ae(Object),required:!0},vertical:{type:Boolean,default:!1}});let re=!1;function z(e,a){if(!lt)return;const l=function(o){var r;(r=a.drag)==null||r.call(a,o)},t=function(o){var r;document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",t),document.removeEventListener("touchmove",l),document.removeEventListener("touchend",t),document.onselectstart=null,document.ondragstart=null,re=!1,(r=a.end)==null||r.call(a,o)},u=function(o){var r;re||(o.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",l),document.addEventListener("mouseup",t),document.addEventListener("touchmove",l),document.addEventListener("touchend",t),re=!0,(r=a.start)==null||r.call(a,o))};e.addEventListener("mousedown",u),e.addEventListener("touchstart",u,{passive:!1})}const ie=e=>{let a,l;return e.type==="touchend"?(l=e.changedTouches[0].clientY,a=e.changedTouches[0].clientX):e.type.startsWith("touch")?(l=e.touches[0].clientY,a=e.touches[0].clientX):(l=e.clientY,a=e.clientX),{clientX:a,clientY:l}},kt=e=>{const a=ee(),{t:l}=Le(),t=ge(),u=ge(),o=S(()=>e.color.get("alpha")),r=S(()=>l("el.colorpicker.alphaLabel"));function v(c){var d;c.target!==t.value&&h(c),(d=t.value)==null||d.focus()}function h(c){if(!u.value||!t.value)return;const i=a.vnode.el.getBoundingClientRect(),{clientX:f,clientY:m}=ie(c);if(e.vertical){let k=m-i.top;k=Math.max(t.value.offsetHeight/2,k),k=Math.min(k,i.height-t.value.offsetHeight/2),e.color.set("alpha",Math.round((k-t.value.offsetHeight/2)/(i.height-t.value.offsetHeight)*100))}else{let k=f-i.left;k=Math.max(t.value.offsetWidth/2,k),k=Math.min(k,i.width-t.value.offsetWidth/2),e.color.set("alpha",Math.round((k-t.value.offsetWidth/2)/(i.width-t.value.offsetWidth)*100))}}function p(c){const{code:d,shiftKey:i}=c,f=i?10:1;switch(d){case F.left:case F.down:c.preventDefault(),c.stopPropagation(),E(-f);break;case F.right:case F.up:c.preventDefault(),c.stopPropagation(),E(f);break}}function E(c){let d=o.value+c;d=d<0?0:d>100?100:d,e.color.set("alpha",d)}return{thumb:t,bar:u,alpha:o,alphaLabel:r,handleDrag:h,handleClick:v,handleKeydown:p}},Ct=(e,{bar:a,thumb:l,handleDrag:t})=>{const u=ee(),o=q("color-alpha-slider"),r=C(0),v=C(0),h=C();function p(){if(!l.value||e.vertical)return 0;const y=u.vnode.el,g=e.color.get("alpha");return y?Math.round(g*(y.offsetWidth-l.value.offsetWidth/2)/100):0}function E(){if(!l.value)return 0;const y=u.vnode.el;if(!e.vertical)return 0;const g=e.color.get("alpha");return y?Math.round(g*(y.offsetHeight-l.value.offsetHeight/2)/100):0}function c(){if(e.color&&e.color.value){const{r:y,g,b:O}=e.color.toRgb();return`linear-gradient(to right, rgba(${y}, ${g}, ${O}, 0) 0%, rgba(${y}, ${g}, ${O}, 1) 100%)`}return""}function d(){r.value=p(),v.value=E(),h.value=c()}Z(()=>{if(!a.value||!l.value)return;const y={drag:g=>{t(g)},end:g=>{t(g)}};z(a.value,y),z(l.value,y),d()}),V(()=>e.color.get("alpha"),()=>d()),V(()=>e.color.value,()=>d());const i=S(()=>[o.b(),o.is("vertical",e.vertical)]),f=S(()=>o.e("bar")),m=S(()=>o.e("thumb")),k=S(()=>({background:h.value})),B=S(()=>({left:we(r.value),top:we(v.value)}));return{rootKls:i,barKls:f,barStyle:k,thumbKls:m,thumbStyle:B,update:d}},yt="ElColorAlphaSlider",wt=K({name:yt}),Et=K(te(U({},wt),{props:_t,setup(e,{expose:a}){const l=e,{alpha:t,alphaLabel:u,bar:o,thumb:r,handleDrag:v,handleClick:h,handleKeydown:p}=kt(l),{rootKls:E,barKls:c,barStyle:d,thumbKls:i,thumbStyle:f,update:m}=Ct(l,{bar:o,thumb:r,handleDrag:v});return a({update:m,bar:o,thumb:r}),(k,B)=>(A(),D("div",{class:b(n(E))},[w("div",{ref_key:"bar",ref:o,class:b(n(c)),style:H(n(d)),onClick:n(h)},null,14,["onClick"]),w("div",{ref_key:"thumb",ref:r,class:b(n(i)),style:H(n(f)),"aria-label":n(u),"aria-valuenow":n(t),"aria-orientation":k.vertical?"vertical":"horizontal","aria-valuemin":"0","aria-valuemax":"100",role:"slider",tabindex:"0",onKeydown:n(p)},null,46,["aria-label","aria-valuenow","aria-orientation","onKeydown"])],2))}}));var St=X(Et,[["__file","alpha-slider.vue"]]);const $t=K({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(e){const a=q("color-hue-slider"),l=ee(),t=C(),u=C(),o=C(0),r=C(0),v=S(()=>e.color.get("hue"));V(()=>v.value,()=>{d()});function h(i){i.target!==t.value&&p(i)}function p(i){if(!u.value||!t.value)return;const m=l.vnode.el.getBoundingClientRect(),{clientX:k,clientY:B}=ie(i);let y;if(e.vertical){let g=B-m.top;g=Math.min(g,m.height-t.value.offsetHeight/2),g=Math.max(t.value.offsetHeight/2,g),y=Math.round((g-t.value.offsetHeight/2)/(m.height-t.value.offsetHeight)*360)}else{let g=k-m.left;g=Math.min(g,m.width-t.value.offsetWidth/2),g=Math.max(t.value.offsetWidth/2,g),y=Math.round((g-t.value.offsetWidth/2)/(m.width-t.value.offsetWidth)*360)}e.color.set("hue",y)}function E(){if(!t.value)return 0;const i=l.vnode.el;if(e.vertical)return 0;const f=e.color.get("hue");return i?Math.round(f*(i.offsetWidth-t.value.offsetWidth/2)/360):0}function c(){if(!t.value)return 0;const i=l.vnode.el;if(!e.vertical)return 0;const f=e.color.get("hue");return i?Math.round(f*(i.offsetHeight-t.value.offsetHeight/2)/360):0}function d(){o.value=E(),r.value=c()}return Z(()=>{if(!u.value||!t.value)return;const i={drag:f=>{p(f)},end:f=>{p(f)}};z(u.value,i),z(t.value,i),d()}),{bar:u,thumb:t,thumbLeft:o,thumbTop:r,hueValue:v,handleClick:h,update:d,ns:a}}});function Vt(e,a,l,t,u,o){return A(),D("div",{class:b([e.ns.b(),e.ns.is("vertical",e.vertical)])},[w("div",{ref:"bar",class:b(e.ns.e("bar")),onClick:e.handleClick},null,10,["onClick"]),w("div",{ref:"thumb",class:b(e.ns.e("thumb")),style:H({left:e.thumbLeft+"px",top:e.thumbTop+"px"})},null,6)],2)}var At=X($t,[["render",Vt],["__file","hue-slider.vue"]]);const Lt=Ve(U({modelValue:String,id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:ot,popperClass:{type:String,default:""},tabindex:{type:[String,Number],default:0},teleported:ht.teleported,predefine:{type:Ae(Array)},validateEvent:{type:Boolean,default:!0}},ft(["ariaLabel"]))),Pt={[x]:e=>ae(e)||ne(e),[se]:e=>ae(e)||ne(e),activeChange:e=>ae(e)||ne(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent},Pe=Symbol("colorPickerContextKey");class Q{constructor(a={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this._tiny=new J,this._isValid=!1,this.enableAlpha=!1,this.format="",this.value="";for(const l in a)be(a,l)&&(this[l]=a[l]);a.value?this.fromString(a.value):this.doOnChange()}set(a,l){if(arguments.length===1&&typeof a=="object"){for(const t in a)be(a,t)&&this.set(t,a[t]);return}this[`_${a}`]=l,this._isValid=!0,this.doOnChange()}get(a){return["hue","saturation","value","alpha"].includes(a)?Math.round(this[`_${a}`]):this[`_${a}`]}toRgb(){return this._isValid?this._tiny.toRgb():{r:255,g:255,b:255,a:0}}fromString(a){const l=new J(a);if(this._isValid=l.isValid,l.isValid){const{h:t,s:u,v:o,a:r}=l.toHsv();this._hue=t,this._saturation=u*100,this._value=o*100,this._alpha=r*100}else this._hue=0,this._saturation=100,this._value=100,this._alpha=100;this.doOnChange()}compare(a){const l=new J({h:a._hue,s:a._saturation/100,v:a._value/100,a:a._alpha/100});return this._tiny.equals(l)}doOnChange(){const{_hue:a,_saturation:l,_value:t,_alpha:u,format:o,enableAlpha:r}=this;let v=o||(r?"rgb":"hex");o==="hex"&&r&&(v="hex8"),this._tiny=new J({h:a,s:l/100,v:t/100,a:u/100}),this.value=this._isValid?this._tiny.toString(v):""}}const Mt=K({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0},enableAlpha:{type:Boolean,required:!0}},setup(e){const a=q("color-predefine"),{currentColor:l}=xe(Pe),t=C(o(e.colors,e.color));V(()=>l.value,r=>{const v=new Q({value:r});t.value.forEach(h=>{h.selected=v.compare(h)})}),Qe(()=>{t.value=o(e.colors,e.color)});function u(r){e.color.fromString(e.colors[r])}function o(r,v){return r.map(h=>{const p=new Q({value:h});return p.selected=p.compare(v),p})}return{rgbaColors:t,handleSelect:u,ns:a}}});function Tt(e,a,l,t,u,o){return A(),D("div",{class:b(e.ns.b())},[w("div",{class:b(e.ns.e("colors"))},[(A(!0),D(Ge,null,Je(e.rgbaColors,(r,v)=>(A(),D("div",{key:e.colors[v],class:b([e.ns.e("color-selector"),e.ns.is("alpha",r.get("alpha")<100),{selected:r.selected}]),onClick:h=>e.handleSelect(v)},[w("div",{style:H({backgroundColor:r.value})},null,4)],10,["onClick"]))),128))],2)],2)}var Ft=X(Mt,[["render",Tt],["__file","predefine.vue"]]);const Bt=K({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(e){const a=q("color-svpanel"),l=ee(),t=C(0),u=C(0),o=C("hsl(0, 100%, 50%)"),r=S(()=>{const p=e.color.get("hue"),E=e.color.get("value");return{hue:p,value:E}});function v(){const p=e.color.get("saturation"),E=e.color.get("value"),c=l.vnode.el,{clientWidth:d,clientHeight:i}=c;u.value=p*d/100,t.value=(100-E)*i/100,o.value=`hsl(${e.color.get("hue")}, 100%, 50%)`}function h(p){const c=l.vnode.el.getBoundingClientRect(),{clientX:d,clientY:i}=ie(p);let f=d-c.left,m=i-c.top;f=Math.max(0,f),f=Math.min(f,c.width),m=Math.max(0,m),m=Math.min(m,c.height),u.value=f,t.value=m,e.color.set({saturation:f/c.width*100,value:100-m/c.height*100})}return V(()=>r.value,()=>{v()}),Z(()=>{z(l.vnode.el,{drag:p=>{h(p)},end:p=>{h(p)}}),v()}),{cursorTop:t,cursorLeft:u,background:o,colorValue:r,handleDrag:h,update:v,ns:a}}});function Dt(e,a,l,t,u,o){return A(),D("div",{class:b(e.ns.b()),style:H({backgroundColor:e.background})},[w("div",{class:b(e.ns.e("white"))},null,2),w("div",{class:b(e.ns.e("black"))},null,2),w("div",{class:b(e.ns.e("cursor")),style:H({top:e.cursorTop+"px",left:e.cursorLeft+"px"})},[w("div")],6)],6)}var Ht=X(Bt,[["render",Dt],["__file","sv-panel.vue"]]);const Kt=K({name:"ElColorPicker"}),Ot=K(te(U({},Kt),{props:Lt,emits:Pt,setup(e,{expose:a,emit:l}){const t=e,{t:u}=Le(),o=q("color"),{formItem:r}=nt(),v=rt(),h=st(),{inputId:p,isLabeledByFormItem:E}=it(t,{formItemContext:r}),c=C(),d=C(),i=C(),f=C(),m=C(),k=C(),{isFocused:B,handleFocus:y,handleBlur:g}=vt(m,{beforeFocus(){return h.value},beforeBlur(s){var $;return($=f.value)==null?void 0:$.isFocusInsideContent(s)},afterBlur(){R(!1),N()}});let O=!0;const _=Ze(new Q({enableAlpha:t.showAlpha,format:t.colorFormat||"",value:t.modelValue})),I=C(!1),M=C(!1),L=C(""),Me=S(()=>!t.modelValue&&!M.value?"transparent":De(_,t.showAlpha)),Y=S(()=>!t.modelValue&&!M.value?"":_.value),Te=S(()=>E.value?void 0:t.ariaLabel||u("el.colorpicker.defaultLabel")),Fe=S(()=>E.value?r==null?void 0:r.labelId:void 0),Be=S(()=>[o.b("picker"),o.is("disabled",h.value),o.bm("picker",v.value),o.is("focused",B.value)]);function De(s,$){const{r:T,g:he,b:ve,a:ze}=s.toRgb();return $?`rgba(${T}, ${he}, ${ve}, ${ze})`:`rgb(${T}, ${he}, ${ve})`}function R(s){I.value=s}const j=gt(R,100,{leading:!0});function ue(){h.value||R(!0)}function ce(){j(!1),N()}function N(){G(()=>{t.modelValue?_.fromString(t.modelValue):(_.value="",!Y.value&&L.value&&(L.value=""),G(()=>{M.value=!1}))})}function He(){h.value||(I.value&&N(),j(!I.value))}function Ke(){_.fromString(L.value),_.value!==L.value&&(L.value=_.value)}function Oe(){const s=_.value;l(x,s),l(se,s),t.validateEvent&&(r==null||r.validate("change").catch($=>$e())),j(!1),G(()=>{const $=new Q({enableAlpha:t.showAlpha,format:t.colorFormat||"",value:t.modelValue});_.compare($)||N()})}function Ie(){j(!1),l(x,null),l(se,null),t.modelValue!==null&&t.validateEvent&&(r==null||r.validate("change").catch(s=>$e())),N()}function Ne(){I.value&&(ce(),B.value&&fe())}function de(s){s.preventDefault(),s.stopPropagation(),R(!1),N()}function We(s){switch(s.code){case F.enter:case F.numpadEnter:case F.space:s.preventDefault(),s.stopPropagation(),ue(),k.value.focus();break;case F.esc:de(s);break}}function fe(){m.value.focus()}function Re(){m.value.blur()}return Z(()=>{t.modelValue&&(L.value=Y.value)}),V(()=>t.modelValue,s=>{s?s&&s!==_.value&&(O=!1,_.fromString(s)):M.value=!1}),V(()=>[t.colorFormat,t.showAlpha],()=>{_.enableAlpha=t.showAlpha,_.format=t.colorFormat||_.format,_.doOnChange(),l(x,_.value)}),V(()=>Y.value,s=>{L.value=s,O&&l("activeChange",s),O=!0}),V(()=>_.value,()=>{!t.modelValue&&!M.value&&(M.value=!0)}),V(()=>I.value,()=>{G(()=>{var s,$,T;(s=c.value)==null||s.update(),($=d.value)==null||$.update(),(T=i.value)==null||T.update()})}),at(Pe,{currentColor:Y}),a({color:_,show:ue,hide:ce,focus:fe,blur:Re}),(s,$)=>(A(),le(n(mt),{ref_key:"popper",ref:f,visible:I.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[n(o).be("picker","panel"),n(o).b("dropdown"),s.popperClass],"stop-popper-mouse-event":!1,effect:"light",trigger:"click",teleported:s.teleported,transition:`${n(o).namespace.value}-zoom-in-top`,persistent:"",onHide:T=>R(!1)},{content:W(()=>[oe((A(),D("div",{onKeydown:tt(de,["esc"])},[w("div",{class:b(n(o).be("dropdown","main-wrapper"))},[P(At,{ref_key:"hue",ref:c,class:"hue-slider",color:n(_),vertical:""},null,8,["color"]),P(Ht,{ref_key:"sv",ref:d,color:n(_)},null,8,["color"])],2),s.showAlpha?(A(),le(St,{key:0,ref_key:"alpha",ref:i,color:n(_)},null,8,["color"])):ke("v-if",!0),s.predefine?(A(),le(Ft,{key:1,ref:"predefine","enable-alpha":s.showAlpha,color:n(_),colors:s.predefine},null,8,["enable-alpha","color","colors"])):ke("v-if",!0),w("div",{class:b(n(o).be("dropdown","btns"))},[w("span",{class:b(n(o).be("dropdown","value"))},[P(n(pt),{ref_key:"inputRef",ref:k,modelValue:L.value,"onUpdate:modelValue":T=>L.value=T,"validate-event":!1,size:"small",onChange:Ke},null,8,["modelValue","onUpdate:modelValue"])],2),P(n(Se),{class:b(n(o).be("dropdown","link-btn")),text:"",size:"small",onClick:Ie},{default:W(()=>[Ce(ye(n(u)("el.colorpicker.clear")),1)]),_:1},8,["class"]),P(n(Se),{plain:"",size:"small",class:b(n(o).be("dropdown","btn")),onClick:Oe},{default:W(()=>[Ce(ye(n(u)("el.colorpicker.confirm")),1)]),_:1},8,["class"])],2)],40,["onKeydown"])),[[n(bt),Ne,m.value]])]),default:W(()=>[w("div",et({id:n(p),ref_key:"triggerRef",ref:m},s.$attrs,{class:n(Be),role:"button","aria-label":n(Te),"aria-labelledby":n(Fe),"aria-description":n(u)("el.colorpicker.description",{color:s.modelValue||""}),"aria-disabled":n(h),tabindex:n(h)?void 0:s.tabindex,onKeydown:We,onFocus:n(y),onBlur:n(g)}),[w("div",{class:b(n(o).be("picker","trigger")),onClick:He},[w("span",{class:b([n(o).be("picker","color"),n(o).is("alpha",s.showAlpha)])},[w("span",{class:b(n(o).be("picker","color-inner")),style:H({backgroundColor:n(Me)})},[oe(P(n(Ee),{class:b([n(o).be("picker","icon"),n(o).is("icon-arrow-down")])},{default:W(()=>[P(n(ut))]),_:1},8,["class"]),[[_e,s.modelValue||M.value]]),oe(P(n(Ee),{class:b([n(o).be("picker","empty"),n(o).is("icon-close")])},{default:W(()=>[P(n(ct))]),_:1},8,["class"]),[[_e,!s.modelValue&&!M.value]])],6)],2)],2)],16,["id","aria-label","aria-labelledby","aria-description","aria-disabled","tabindex","onFocus","onBlur"])]),_:1},8,["visible","popper-class","teleported","transition","onHide"]))}}));var It=X(Ot,[["__file","color-picker.vue"]]);const Xt=dt(It);export{Xt as E};
