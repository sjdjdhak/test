var Et=Object.defineProperty,It=Object.defineProperties;var St=Object.getOwnPropertyDescriptors;var G=Object.getOwnPropertySymbols;var $t=Object.prototype.hasOwnProperty,Nt=Object.prototype.propertyIsEnumerable;var J=(v,c,i)=>c in v?Et(v,c,{enumerable:!0,configurable:!0,writable:!0,value:i}):v[c]=i,x=(v,c)=>{for(var i in c||(c={}))$t.call(c,i)&&J(v,i,c[i]);if(G)for(var i of G(c))Nt.call(c,i)&&J(v,i,c[i]);return v},R=(v,c)=>It(v,St(c));var N=(v,c,i)=>new Promise((h,_)=>{var b=n=>{try{k(i.next(n))}catch(d){_(d)}},V=n=>{try{k(i.throw(n))}catch(d){_(d)}},k=n=>n.done?h(n.value):Promise.resolve(n.value).then(b,V);k((i=i.apply(v,c)).next())});import{b as Ut,x as Ft,_ as Tt,T as xt,U as Rt,V as K,u as zt,f as Z,w as Bt,p as Lt,E as Pt,W as At,X as jt,F as W,o as Mt,Y as H,L as Ot,r as qt,I as Gt,h as Jt,Z as Kt,$ as Wt,t as Ht,a0 as Xt,e as Yt}from"./_plugin-vue_export-helper-DAE0c8RX.js";import{E as Zt,a as Qt}from"./el-progress-Czd96EQ_.js";import{E as te}from"./el-overlay-C2e_3Wn6.js";import{E as ee,a as se,b as oe}from"./el-form-item-C3AQGlqp.js";import{b as ae,a as le}from"./el-input-B5lZdLQh.js";import{a as ie,E as I,b as ne}from"./el-select-CaBiTLQY.js";import{d as P,c as y,a as C,o as g,l as T,b as z,r as X,w as a,p as Q,u,n as Y,f as w,H as de,x as re,g as e,h as s,t as m,i as p,F as B,q as L,j as ce}from"./index-C8EcO_R4.js";import{a as ue,u as ve}from"./navigation-7vtA9nYp.js";const _e=Ut({type:{type:String,values:["primary","success","warning","info","danger","default"],default:void 0},underline:{type:[Boolean,String],values:[!0,!1,"always","never","hover"],default:void 0},disabled:Boolean,href:{type:String,default:""},target:{type:String,default:"_self"},icon:{type:Ft}}),pe={click:v=>v instanceof MouseEvent},fe=P({name:"ElLink"}),me=P(R(x({},fe),{props:_e,emits:pe,setup(v,{emit:c}){const i=v,h=xt("link");Rt({scope:"el-link",from:"The underline option (boolean)",replacement:"'always' | 'hover' | 'never'",version:"3.0.0",ref:"https://element-plus.org/en-US/component/link.html#underline"},y(()=>K(i.underline)));const _=zt("link"),b=y(()=>{var n,d,D;return[_.b(),_.m((D=(d=i.type)!=null?d:(n=h.value)==null?void 0:n.type)!=null?D:"default"),_.is("disabled",i.disabled),_.is("underline",V.value==="always"),_.is("hover-underline",V.value==="hover"&&!i.disabled)]}),V=y(()=>{var n,d,D;return K(i.underline)?i.underline?"hover":"never":(D=(d=i.underline)!=null?d:(n=h.value)==null?void 0:n.underline)!=null?D:"hover"});function k(n){i.disabled||c("click",n)}return(n,d)=>(g(),C("a",{class:Y(u(b)),href:n.disabled||!n.href?void 0:n.href,target:n.disabled||!n.href?void 0:n.target,onClick:k},[n.icon?(g(),T(u(Z),{key:0},{default:a(()=>[(g(),T(Q(n.icon)))]),_:1})):z("v-if",!0),n.$slots.default?(g(),C("span",{key:1,class:Y(u(_).e("inner"))},[X(n.$slots,"default")],2)):z("v-if",!0),n.$slots.icon?X(n.$slots,"icon",{key:2}):z("v-if",!0)],10,["href","target"]))}}));var ge=Tt(me,[["__file","link.vue"]]);const ye=Bt(ge),he={class:"admin-dashboard"},be={class:"dashboard-header"},ke={class:"header-content"},we={class:"header-actions"},Ce={class:"stats-section"},Ve={class:"stats-grid"},De={class:"stat-card"},Ee={class:"stat-icon"},Ie={class:"stat-content"},Se={class:"stat-value"},$e={class:"stat-change positive"},Ne={class:"stat-card"},Ue={class:"stat-icon"},Fe={class:"stat-content"},Te={class:"stat-value"},xe={class:"stat-change"},Re={class:"stat-card"},ze={class:"stat-icon"},Be={class:"stat-content"},Le={class:"stat-value"},Pe={class:"stat-change positive"},Ae={class:"stat-card"},je={class:"stat-icon"},Me={class:"stat-content"},Oe={class:"stat-value"},qe={class:"stat-change"},Ge={class:"main-content"},Je={class:"content-grid"},Ke={class:"left-content"},We={class:"section-card"},He={class:"card-content"},Xe={class:"quick-actions"},Ye={class:"action-icon"},Ze={class:"action-icon"},Qe={class:"action-icon"},ts={class:"action-icon"},es={class:"section-card"},ss={class:"card-header"},os={class:"card-content"},as={class:"chart-container"},ls={class:"chart-placeholder"},is={class:"right-content"},ns={class:"section-card"},ds={class:"card-header"},rs={class:"card-content"},cs={class:"activity-list"},us={class:"activity-icon"},vs={class:"activity-content"},_s={class:"activity-text"},ps={class:"activity-time"},fs={class:"section-card"},ms={class:"card-header"},gs={class:"card-content"},ys={class:"popular-list"},hs={class:"popular-rank"},bs={class:"popular-icon"},ks=["src","alt"],ws={class:"popular-info"},Cs={class:"popular-title"},Vs={class:"popular-visits"},Ds={class:"popular-actions"},Es={class:"section-card"},Is={class:"card-content"},Ss={class:"status-list"},$s={class:"status-item"},Ns={class:"status-value"},Us={class:"status-item"},Fs={class:"status-value"},Ts={class:"status-item"},xs={class:"status-value"},Rs={class:"status-item"},zs={class:"status-value"},Bs={class:"storage-text"},Ls={class:"import-content"},Ps=P({__name:"Dashboard",setup(v){const c=ce(),i=ue(),h=ve(),_=w(!1),b=w(!1),V=w("7d"),k=w(),n=w(),d=de({title:"",url:"",description:"",categoryId:"",tagsInput:"",featured:!1}),D={title:[{required:!0,message:"请输入标题",trigger:"blur"}],url:[{required:!0,message:"请输入网址",trigger:"blur"},{type:"url",message:"请输入有效的网址",trigger:"blur"}],categoryId:[{required:!0,message:"请选择分类",trigger:"change"}]},tt=y(()=>i.navigations.length),et=y(()=>h.categories.length),st=y(()=>i.navigations.reduce((l,t)=>l+t.visitCount,0)),ot=y(()=>i.navigations.filter(l=>l.featured).length),at=y(()=>{const l=new Date;return l.setDate(l.getDate()-7),i.navigations.filter(t=>new Date(t.createTime)>l).length}),lt=y(()=>12500),it=y(()=>h.flatCategories),nt=y(()=>[...i.navigations].sort((l,t)=>t.visitCount-l.visitCount).slice(0,5)),dt=w([{id:1,type:"add",description:'添加了新导航 "ChatGPT"',time:new Date(Date.now()-1e3*60*30)},{id:2,type:"edit",description:'编辑了分类 "AI工具"',time:new Date(Date.now()-1e3*60*60*2)},{id:3,type:"delete",description:'删除了导航 "旧工具"',time:new Date(Date.now()-1e3*60*60*5)},{id:4,type:"sync",description:"数据同步完成",time:new Date(Date.now()-1e3*60*60*8)}]),rt=w("2分钟前"),ct=w(8),A=w(65),j=l=>l>=1e6?(l/1e6).toFixed(1)+"M":l>=1e3?(l/1e3).toFixed(1)+"K":l.toString(),ut=l=>{const f=new Date().getTime()-l.getTime(),r=Math.floor(f/(1e3*60)),E=Math.floor(f/(1e3*60*60)),$=Math.floor(f/(1e3*60*60*24));return $>0?`${$}天前`:E>0?`${E}小时前`:r>0?`${r}分钟前`:"刚刚"},vt=l=>({add:"Plus",edit:"Edit",delete:"Delete",sync:"Refresh"})[l]||"InfoFilled",_t=l=>({add:"#52c41a",edit:"#1890ff",delete:"#ff4d4f",sync:"#722ed1"})[l]||"#666",U=l=>{c.push(l)},pt=()=>N(this,null,function*(){try{yield Promise.all([i.fetchNavigations(),h.fetchCategories()]),I.success("数据刷新成功")}catch(l){I.error("数据刷新失败")}}),M=()=>{var l;Object.assign(d,{title:"",url:"",description:"",categoryId:"",tagsInput:"",featured:!1}),(l=k.value)==null||l.resetFields()},ft=()=>N(this,null,function*(){try{yield k.value.validate();const l=R(x({},d),{tags:d.tagsInput.split(",").map(t=>t.trim()).filter(Boolean)});yield i.createNavigation(l),I.success("添加成功"),_.value=!1,M()}catch(l){I.error("添加失败")}}),mt=l=>{c.push(`/admin/navigation/edit/${l.id}`)},gt=l=>{console.log("Selected file:",l)},yt=()=>{I.info("导入功能开发中..."),b.value=!1},ht=()=>N(this,null,function*(){try{const l={navigations:i.navigations,categories:h.categories,exportTime:new Date().toISOString()},t=new Blob([JSON.stringify(l,null,2)],{type:"application/json"}),f=URL.createObjectURL(t),r=document.createElement("a");r.href=f,r.download=`ai-navigation-export-${Date.now()}.json`,r.click(),URL.revokeObjectURL(f),I.success("导出成功")}catch(l){I.error("导出失败")}});return re(()=>N(this,null,function*(){yield Promise.all([i.fetchNavigations(),h.fetchCategories()])})),(l,t)=>{const f=Pt,r=Z,E=ne,$=ie,O=ye,bt=ae,kt=Zt,F=le,S=se,wt=oe,Ct=ee,q=te,Vt=Qt;return g(),C("div",he,[e("div",be,[e("div",ke,[t[19]||(t[19]=e("div",{class:"header-info"},[e("h1",{class:"page-title"},"仪表板"),e("p",{class:"page-subtitle"},"欢迎回来，管理员")],-1)),e("div",we,[s(f,{type:"primary",icon:u(Lt),onClick:t[0]||(t[0]=o=>_.value=!0)},{default:a(()=>t[17]||(t[17]=[p(" 添加导航 ")])),_:1,__:[17]},8,["icon"]),s(f,{icon:u(At),onClick:pt},{default:a(()=>t[18]||(t[18]=[p(" 刷新数据 ")])),_:1,__:[18]},8,["icon"])])])]),e("div",Ce,[e("div",Ve,[e("div",De,[e("div",Ee,[s(r,{size:"32",color:"#1890ff"},{default:a(()=>[s(u(jt))]),_:1})]),e("div",Ie,[e("div",Se,m(tt.value),1),t[20]||(t[20]=e("div",{class:"stat-label"},"总导航数",-1)),e("div",$e,[s(r,null,{default:a(()=>[s(u(W))]),_:1}),p(" +"+m(at.value)+" 本周新增 ",1)])])]),e("div",Ne,[e("div",Ue,[s(r,{size:"32",color:"#52c41a"},{default:a(()=>[s(u(Mt))]),_:1})]),e("div",Fe,[e("div",Te,m(et.value),1),t[22]||(t[22]=e("div",{class:"stat-label"},"分类数量",-1)),e("div",xe,[s(r,null,{default:a(()=>[s(u(H))]),_:1}),t[21]||(t[21]=p(" 无变化 "))])])]),e("div",Re,[e("div",ze,[s(r,{size:"32",color:"#fa8c16"},{default:a(()=>[s(u(Ot))]),_:1})]),e("div",Be,[e("div",Le,m(j(st.value)),1),t[23]||(t[23]=e("div",{class:"stat-label"},"总访问量",-1)),e("div",Pe,[s(r,null,{default:a(()=>[s(u(W))]),_:1}),p(" +"+m(j(lt.value))+" 本周 ",1)])])]),e("div",Ae,[e("div",je,[s(r,{size:"32",color:"#eb2f96"},{default:a(()=>[s(u(qt))]),_:1})]),e("div",Me,[e("div",Oe,m(ot.value),1),t[25]||(t[25]=e("div",{class:"stat-label"},"推荐项目",-1)),e("div",qe,[s(r,null,{default:a(()=>[s(u(H))]),_:1}),t[24]||(t[24]=p(" 无变化 "))])])])])]),e("div",Ge,[e("div",Je,[e("div",Ke,[e("div",We,[t[30]||(t[30]=e("div",{class:"card-header"},[e("h3",{class:"card-title"},"快速操作")],-1)),e("div",He,[e("div",Xe,[e("div",{class:"action-item",onClick:t[1]||(t[1]=o=>U("/admin/navigation"))},[e("div",Ye,[s(r,null,{default:a(()=>[s(u(Gt))]),_:1})]),t[26]||(t[26]=e("div",{class:"action-info"},[e("div",{class:"action-title"},"管理导航"),e("div",{class:"action-desc"},"添加、编辑或删除导航项")],-1))]),e("div",{class:"action-item",onClick:t[2]||(t[2]=o=>U("/admin/category"))},[e("div",Ze,[s(r,null,{default:a(()=>[s(u(Jt))]),_:1})]),t[27]||(t[27]=e("div",{class:"action-info"},[e("div",{class:"action-title"},"管理分类"),e("div",{class:"action-desc"},"组织和管理分类结构")],-1))]),e("div",{class:"action-item",onClick:t[3]||(t[3]=o=>b.value=!0)},[e("div",Qe,[s(r,null,{default:a(()=>[s(u(Kt))]),_:1})]),t[28]||(t[28]=e("div",{class:"action-info"},[e("div",{class:"action-title"},"批量导入"),e("div",{class:"action-desc"},"从文件批量导入导航数据")],-1))]),e("div",{class:"action-item",onClick:ht},[e("div",ts,[s(r,null,{default:a(()=>[s(u(Wt))]),_:1})]),t[29]||(t[29]=e("div",{class:"action-info"},[e("div",{class:"action-title"},"导出数据"),e("div",{class:"action-desc"},"导出所有导航数据")],-1))])])])]),e("div",es,[e("div",ss,[t[31]||(t[31]=e("h3",{class:"card-title"},"访问统计",-1)),s($,{modelValue:V.value,"onUpdate:modelValue":t[4]||(t[4]=o=>V.value=o),size:"small",style:{width:"100px"}},{default:a(()=>[s(E,{label:"7天",value:"7d"}),s(E,{label:"30天",value:"30d"}),s(E,{label:"90天",value:"90d"})]),_:1},8,["modelValue"])]),e("div",os,[e("div",as,[e("div",ls,[s(r,{size:"48",color:"#ddd"},{default:a(()=>[s(u(Ht))]),_:1}),t[32]||(t[32]=e("p",null,"访问统计图表",-1)),t[33]||(t[33]=e("small",null,"（图表组件待集成）",-1))])])])])]),e("div",is,[e("div",ns,[e("div",ds,[t[35]||(t[35]=e("h3",{class:"card-title"},"最近活动",-1)),s(O,{type:"primary",onClick:t[5]||(t[5]=o=>U("/admin/logs"))},{default:a(()=>t[34]||(t[34]=[p(" 查看全部 ")])),_:1,__:[34]})]),e("div",rs,[e("div",cs,[(g(!0),C(B,null,L(dt.value,o=>(g(),C("div",{key:o.id,class:"activity-item"},[e("div",us,[s(r,{color:_t(o.type)},{default:a(()=>[(g(),T(Q(vt(o.type))))]),_:2},1032,["color"])]),e("div",vs,[e("div",_s,m(o.description),1),e("div",ps,m(ut(o.time)),1)])]))),128))])])]),e("div",fs,[e("div",ms,[t[37]||(t[37]=e("h3",{class:"card-title"},"热门导航",-1)),s(O,{type:"primary",onClick:t[6]||(t[6]=o=>U("/admin/navigation"))},{default:a(()=>t[36]||(t[36]=[p(" 管理全部 ")])),_:1,__:[36]})]),e("div",gs,[e("div",ys,[(g(!0),C(B,null,L(nt.value,(o,Dt)=>(g(),C("div",{key:o.id,class:"popular-item"},[e("div",hs,m(Dt+1),1),e("div",bs,[e("img",{src:o.icon,alt:o.title},null,8,ks)]),e("div",ws,[e("div",Cs,m(o.title),1),e("div",Vs,m(o.visitCount)+" 次访问",1)]),e("div",Ds,[s(f,{size:"small",text:"",onClick:As=>mt(o)},{default:a(()=>t[38]||(t[38]=[p(" 编辑 ")])),_:2,__:[38]},1032,["onClick"])])]))),128))])])]),e("div",Es,[t[44]||(t[44]=e("div",{class:"card-header"},[e("h3",{class:"card-title"},"系统状态")],-1)),e("div",Is,[e("div",Ss,[e("div",$s,[t[40]||(t[40]=e("div",{class:"status-label"},"数据同步",-1)),e("div",Ns,[s(bt,{type:"success",size:"small"},{default:a(()=>t[39]||(t[39]=[p("正常")])),_:1,__:[39]})])]),e("div",Us,[t[41]||(t[41]=e("div",{class:"status-label"},"最后同步",-1)),e("div",Fs,m(rt.value),1)]),e("div",Ts,[t[42]||(t[42]=e("div",{class:"status-label"},"数据文件",-1)),e("div",xs,m(ct.value)+" 个",1)]),e("div",Rs,[t[43]||(t[43]=e("div",{class:"status-label"},"存储使用",-1)),e("div",zs,[s(kt,{percentage:A.value,"stroke-width":6,"show-text":!1},null,8,["percentage"]),e("span",Bs,m(A.value)+"%",1)])])])])])])])]),s(q,{modelValue:_.value,"onUpdate:modelValue":t[14]||(t[14]=o=>_.value=o),title:"添加导航",width:"600px",onClose:M},{footer:a(()=>[s(f,{onClick:t[13]||(t[13]=o=>_.value=!1)},{default:a(()=>t[45]||(t[45]=[p("取消")])),_:1,__:[45]}),s(f,{type:"primary",onClick:ft},{default:a(()=>t[46]||(t[46]=[p("确定")])),_:1,__:[46]})]),default:a(()=>[s(Ct,{ref_key:"addFormRef",ref:k,model:d,rules:D,"label-width":"80px"},{default:a(()=>[s(S,{label:"标题",prop:"title"},{default:a(()=>[s(F,{modelValue:d.title,"onUpdate:modelValue":t[7]||(t[7]=o=>d.title=o),placeholder:"请输入导航标题"},null,8,["modelValue"])]),_:1}),s(S,{label:"网址",prop:"url"},{default:a(()=>[s(F,{modelValue:d.url,"onUpdate:modelValue":t[8]||(t[8]=o=>d.url=o),placeholder:"请输入网址"},null,8,["modelValue"])]),_:1}),s(S,{label:"描述",prop:"description"},{default:a(()=>[s(F,{modelValue:d.description,"onUpdate:modelValue":t[9]||(t[9]=o=>d.description=o),type:"textarea",rows:3,placeholder:"请输入描述"},null,8,["modelValue"])]),_:1}),s(S,{label:"分类",prop:"categoryId"},{default:a(()=>[s($,{modelValue:d.categoryId,"onUpdate:modelValue":t[10]||(t[10]=o=>d.categoryId=o),placeholder:"选择分类"},{default:a(()=>[(g(!0),C(B,null,L(it.value,o=>(g(),T(E,{key:o.id,label:o.name,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(S,{label:"标签"},{default:a(()=>[s(F,{modelValue:d.tagsInput,"onUpdate:modelValue":t[11]||(t[11]=o=>d.tagsInput=o),placeholder:"请输入标签，用逗号分隔"},null,8,["modelValue"])]),_:1}),s(S,{label:"推荐"},{default:a(()=>[s(wt,{modelValue:d.featured,"onUpdate:modelValue":t[12]||(t[12]=o=>d.featured=o)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),s(q,{modelValue:b.value,"onUpdate:modelValue":t[16]||(t[16]=o=>b.value=o),title:"批量导入",width:"500px"},{footer:a(()=>[s(f,{onClick:t[15]||(t[15]=o=>b.value=!1)},{default:a(()=>t[48]||(t[48]=[p("取消")])),_:1,__:[48]}),s(f,{type:"primary",onClick:yt},{default:a(()=>t[49]||(t[49]=[p("导入")])),_:1,__:[49]})]),default:a(()=>[e("div",Ls,[s(Vt,{ref_key:"uploadRef",ref:n,"auto-upload":!1,"on-change":gt,accept:".json,.csv",drag:""},{default:a(()=>[s(r,{size:"48"},{default:a(()=>[s(u(Xt))]),_:1}),t[47]||(t[47]=e("div",{class:"upload-text"},[e("p",null,[p("将文件拖到此处，或"),e("em",null,"点击上传")]),e("p",{class:"upload-tip"},"支持 JSON 和 CSV 格式")],-1))]),_:1,__:[47]},512)])]),_:1},8,["modelValue"])])}}}),Xs=Yt(Ps,[["__scopeId","data-v-c1ec8d08"]]);export{Xs as default};
