var ze=Object.defineProperty,Ne=Object.defineProperties;var Se=Object.getOwnPropertyDescriptors;var Z=Object.getOwnPropertySymbols;var Ie=Object.prototype.hasOwnProperty,Te=Object.prototype.propertyIsEnumerable;var ee=(m,l,c)=>l in m?ze(m,l,{enumerable:!0,configurable:!0,writable:!0,value:c}):m[l]=c,F=(m,l)=>{for(var c in l||(l={}))Ie.call(l,c)&&ee(m,c,l[c]);if(Z)for(var c of Z(l))Te.call(l,c)&&ee(m,c,l[c]);return m},R=(m,l)=>Ne(m,Se(l));var te=(m,l,c)=>new Promise((h,p)=>{var f=_=>{try{k(c.next(_))}catch(y){p(y)}},B=_=>{try{k(c.throw(_))}catch(y){p(y)}},k=_=>_.done?h(_.value):Promise.resolve(_.value).then(f,B);k((c=c.apply(m,l)).next())});import{b as se,x as xe,_ as ae,y as Pe,u as oe,d as $e,f as ne,w as Ve,z as Ae,r as De,E as Le,A as Me,g as je,n as Fe,B as Re,C as Ue,e as Oe}from"./_plugin-vue_export-helper-DAE0c8RX.js";import{E as qe}from"./el-rate-CX40KGOT.js";import{b as Ge}from"./el-input-B5lZdLQh.js";import{E as U,a as Ke,b as He}from"./el-select-CaBiTLQY.js";import{E as Je}from"./el-empty-Dk45v0Fv.js";import{E as Qe,a as We}from"./el-radio-group-CDZN11B-.js";import{d as A,f as E,x as le,a as u,o,r as re,u as g,n as V,z as Xe,A as Ye,B as Ze,g as t,l as C,w as i,p as M,t as d,c as b,C as et,D as tt,b as S,h as n,F as T,q as $,i as I,j as st}from"./index-C8EcO_R4.js";import{N as at}from"./NavigationGrid-Bk7pSB37.js";import{N as ot}from"./NavigationCard-QWVFCIg9.js";import{L as nt}from"./Loading-D81gCkra.js";import{a as lt,u as rt}from"./navigation-7vtA9nYp.js";import"./el-skeleton-item-CzrWbPsQ.js";/* empty css                        */const ie=Symbol("breadcrumbKey"),it=se({separator:{type:String,default:"/"},separatorIcon:{type:xe}}),ct=A({name:"ElBreadcrumb"}),ut=A(R(F({},ct),{props:it,setup(m){const l=m,{t:c}=Pe(),h=oe("breadcrumb"),p=E();return Xe(ie,l),le(()=>{const f=p.value.querySelectorAll(`.${h.e("item")}`);f.length&&f[f.length-1].setAttribute("aria-current","page")}),(f,B)=>(o(),u("div",{ref_key:"breadcrumb",ref:p,class:V(g(h).b()),"aria-label":g(c)("el.breadcrumb.label"),role:"navigation"},[re(f.$slots,"default")],10,["aria-label"]))}}));var dt=ae(ut,[["__file","breadcrumb.vue"]]);const _t=se({to:{type:$e([String,Object]),default:""},replace:Boolean}),vt=A({name:"ElBreadcrumbItem"}),pt=A(R(F({},vt),{props:_t,setup(m){const l=m,c=Ze(),h=Ye(ie,void 0),p=oe("breadcrumb"),f=c.appContext.config.globalProperties.$router,B=E(),k=()=>{!l.to||!f||(l.replace?f.replace(l.to):f.push(l.to))};return(_,y)=>{var w,z;return o(),u("span",{class:V(g(p).e("item"))},[t("span",{ref_key:"link",ref:B,class:V([g(p).e("inner"),g(p).is("link",!!_.to)]),role:"link",onClick:k},[re(_.$slots,"default")],2),(w=g(h))!=null&&w.separatorIcon?(o(),C(g(ne),{key:0,class:V(g(p).e("separator"))},{default:i(()=>[(o(),C(M(g(h).separatorIcon)))]),_:1},8,["class"])):(o(),u("span",{key:1,class:V(g(p).e("separator")),role:"presentation"},d((z=g(h))==null?void 0:z.separator),3))],2)}}}));var ce=ae(pt,[["__file","breadcrumb-item.vue"]]);const gt=Ve(dt,{BreadcrumbItem:ce}),mt=Ae(ce),ft={class:"category-page"},ht={class:"category-header"},yt={class:"container"},bt={key:0,class:"category-info"},Ct={class:"category-main"},kt={class:"category-icon"},wt={class:"category-details"},Et={class:"category-title"},Bt={key:0,class:"category-description"},zt={class:"category-stats"},Nt={class:"stat-item"},St={class:"stat-value"},It={key:0,class:"stat-item"},Tt={class:"stat-value"},xt={class:"stat-item"},Pt={class:"stat-value"},$t={class:"category-actions"},Vt={key:0,class:"subcategories-section"},At={class:"container"},Dt={class:"section-header"},Lt={class:"section-count"},Mt={class:"subcategories-grid"},jt=["onClick"],Ft={class:"subcategory-icon"},Rt={class:"subcategory-info"},Ut={class:"subcategory-name"},Ot={class:"subcategory-description"},qt={class:"subcategory-count"},Gt={class:"tools-section"},Kt={class:"container"},Ht={class:"section-header"},Jt={class:"section-title"},Qt={class:"section-controls"},Wt={class:"section-count"},Xt={class:"view-controls"},Yt={key:0,class:"tags-filter"},Zt={class:"tags-list"},es={class:"tools-container"},ts={key:1,class:"tools-list"},ss={key:2,class:"empty-tools"},as={class:"empty-actions"},os={key:1,class:"pagination-container"},ns={key:1,class:"related-section"},ls={class:"container"},rs={class:"related-grid"},is=["onClick"],cs={class:"related-icon"},us={class:"related-info"},ds={class:"related-name"},_s={class:"related-count"},vs=A({__name:"Category",setup(m){const l=et(),c=st(),h=lt(),p=rt(),f=E(!1),B=E("grid"),k=E("featured"),_=E([]),y=E(1),w=E(24),z=E(!1),v=b(()=>{const a=l.params.id;return p.getCategoryById(a)}),ue=b(()=>v.value?p.getCategoryPath(v.value.id).slice(0,-1):[]),D=b(()=>v.value?p.getSubcategories(v.value.id):[]),O=b(()=>D.value.length),L=b(()=>v.value?h.getNavigationsByCategory(v.value.id):[]),de=b(()=>L.value.length),_e=b(()=>L.value.reduce((a,e)=>a+e.visitCount,0)),q=b(()=>{const a=new Map;return L.value.forEach(e=>{e.tags.forEach(r=>{a.set(r,(a.get(r)||0)+1)})}),Array.from(a.entries()).map(([e,r])=>({name:e,count:r})).sort((e,r)=>r.count-e.count).slice(0,10)}),x=b(()=>{let a=[...L.value];return _.value.length>0&&(a=a.filter(e=>_.value.some(r=>e.tags.includes(r)))),a.sort((e,r)=>{switch(k.value){case"featured":return e.featured!==r.featured?r.featured?1:-1:r.rating-e.rating;case"createTime":return new Date(r.createTime).getTime()-new Date(e.createTime).getTime();case"visitCount":return r.visitCount-e.visitCount;case"rating":return r.rating-e.rating;case"title":return e.title.localeCompare(r.title);default:return 0}}),a}),ve=b(()=>Math.ceil(x.value.length/w.value)),G=b(()=>{const a=(y.value-1)*w.value,e=a+w.value;return x.value.slice(a,e)}),K=b(()=>v.value?p.getSiblingCategories(v.value.id).slice(0,6):[]),H=a=>{c.push({name:"Category",params:{id:a}})},J=a=>{h.recordVisit(a.id),window.open(a.url,"_blank")},pe=()=>{y.value=1},ge=a=>{y.value=a,window.scrollTo({top:0,behavior:"smooth"})},me=a=>{w.value=a,y.value=1},fe=a=>{const e=_.value.indexOf(a);e>-1?_.value.splice(e,1):_.value.push(a),y.value=1},he=()=>{z.value=!z.value,U.success(z.value?"已关注该分类":"已取消关注")},ye=()=>{var e,r;const a=window.location.href;navigator.share?navigator.share({title:`${(e=v.value)==null?void 0:e.name} - AI导航`,text:(r=v.value)==null?void 0:r.description,url:a}):navigator.clipboard.writeText(a).then(()=>{U.success("链接已复制到剪贴板")})},Q=a=>h.getNavigationsByCategory(a).length;return le(()=>te(this,null,function*(){f.value=!0;try{yield Promise.all([p.fetchCategories(),h.fetchNavigations()])}catch(a){U.error("加载数据失败"),console.error("Load data error:",a)}finally{f.value=!1}})),tt(()=>l.params.id,()=>{y.value=1,_.value=[]}),(a,e)=>{var X;const r=mt,be=gt,N=ne,j=Le,P=He,Ce=Ke,W=We,ke=Qe,we=Ge,Ee=Je,Be=qe;return o(),u("div",ft,[t("div",ht,[t("div",yt,[n(be,{separator:"/",class:"breadcrumb"},{default:i(()=>[n(r,{to:{path:"/"}},{default:i(()=>e[5]||(e[5]=[I("首页")])),_:1,__:[5]}),(o(!0),u(T,null,$(ue.value,s=>(o(),C(r,{key:s.id,to:{name:"Category",params:{id:s.id}}},{default:i(()=>[I(d(s.name),1)]),_:2},1032,["to"]))),128)),n(r,null,{default:i(()=>{var s;return[I(d((s=v.value)==null?void 0:s.name),1)]}),_:1})]),_:1}),v.value?(o(),u("div",bt,[t("div",Ct,[t("div",kt,[n(N,{size:48,color:v.value.color},{default:i(()=>[(o(),C(M(v.value.icon)))]),_:1},8,["color"])]),t("div",wt,[t("h1",Et,d(v.value.name),1),v.value.description?(o(),u("p",Bt,d(v.value.description),1)):S("",!0),t("div",zt,[t("div",Nt,[t("span",St,d(de.value),1),e[6]||(e[6]=t("span",{class:"stat-label"},"个工具",-1))]),O.value>0?(o(),u("div",It,[t("span",Tt,d(O.value),1),e[7]||(e[7]=t("span",{class:"stat-label"},"个子分类",-1))])):S("",!0),t("div",xt,[t("span",Pt,d(_e.value),1),e[8]||(e[8]=t("span",{class:"stat-label"},"次访问",-1))])])])]),t("div",$t,[n(j,{type:"primary",icon:g(De),onClick:he},{default:i(()=>[I(d(z.value?"已关注":"关注分类"),1)]),_:1},8,["icon"]),n(j,{icon:g(Me),onClick:ye},{default:i(()=>e[9]||(e[9]=[I(" 分享 ")])),_:1,__:[9]},8,["icon"])])])):S("",!0)])]),D.value.length>0?(o(),u("div",Vt,[t("div",At,[t("div",Dt,[e[10]||(e[10]=t("h2",{class:"section-title"},"子分类",-1)),t("span",Lt,d(D.value.length)+" 个",1)]),t("div",Mt,[(o(!0),u(T,null,$(D.value,s=>(o(),u("div",{key:s.id,class:"subcategory-card",onClick:Y=>H(s.id)},[t("div",Ft,[n(N,{size:32,color:s.color},{default:i(()=>[(o(),C(M(s.icon)))]),_:2},1032,["color"])]),t("div",Rt,[t("h3",Ut,d(s.name),1),t("p",Ot,d(s.description),1),t("div",qt,d(Q(s.id))+" 个工具 ",1)]),n(N,{class:"subcategory-arrow"},{default:i(()=>[n(g(je))]),_:1})],8,jt))),128))])])])):S("",!0),t("div",Gt,[t("div",Kt,[t("div",Ht,[t("h2",Jt,d((X=v.value)==null?void 0:X.name)+"工具 ",1),t("div",Qt,[t("span",Wt,d(x.value.length)+" 个工具",1),t("div",Xt,[n(Ce,{modelValue:k.value,"onUpdate:modelValue":e[0]||(e[0]=s=>k.value=s),size:"small",style:{width:"120px"},onChange:pe},{default:i(()=>[n(P,{label:"推荐排序",value:"featured"}),n(P,{label:"最新添加",value:"createTime"}),n(P,{label:"访问量",value:"visitCount"}),n(P,{label:"评分",value:"rating"}),n(P,{label:"名称",value:"title"})]),_:1},8,["modelValue"]),n(ke,{modelValue:B.value,"onUpdate:modelValue":e[1]||(e[1]=s=>B.value=s),size:"small"},{default:i(()=>[n(W,{label:"grid"},{default:i(()=>[n(N,null,{default:i(()=>[n(g(Fe))]),_:1})]),_:1}),n(W,{label:"list"},{default:i(()=>[n(N,null,{default:i(()=>[n(g(Re))]),_:1})]),_:1})]),_:1},8,["modelValue"])])])]),q.value.length>0?(o(),u("div",Yt,[e[11]||(e[11]=t("div",{class:"tags-header"},[t("span",{class:"tags-label"},"热门标签：")],-1)),t("div",Zt,[(o(!0),u(T,null,$(q.value,s=>(o(),C(we,{key:s.name,type:_.value.includes(s.name)?"primary":"info",class:"tag-filter",onClick:Y=>fe(s.name)},{default:i(()=>[I(d(s.name)+" ("+d(s.count)+") ",1)]),_:2},1032,["type","onClick"]))),128))])])):S("",!0),t("div",es,[f.value?(o(),C(nt,{key:0,type:"skeleton",count:8})):x.value.length>0?(o(),u(T,{key:1},[B.value==="grid"?(o(),C(at,{key:0,items:G.value,loading:f.value,onItemClick:J},null,8,["items","loading"])):(o(),u("div",ts,[(o(!0),u(T,null,$(G.value,s=>(o(),C(ot,{key:s.id,navigation:s,layout:"horizontal",onClick:J},null,8,["navigation"]))),128))]))],64)):(o(),u("div",ss,[n(Ee,{description:"该分类下暂无工具"},{image:i(()=>[n(N,{size:"64"},{default:i(()=>[n(g(Ue))]),_:1})]),default:i(()=>[t("div",as,[e[13]||(e[13]=t("p",null,"该分类下还没有添加任何工具",-1)),n(j,{type:"primary",onClick:e[2]||(e[2]=s=>a.$router.push("/"))},{default:i(()=>e[12]||(e[12]=[I(" 浏览其他分类 ")])),_:1,__:[12]})])]),_:1})]))]),ve.value>1?(o(),u("div",os,[n(Be,{"current-page":y.value,"onUpdate:currentPage":e[3]||(e[3]=s=>y.value=s),"page-size":w.value,"onUpdate:pageSize":e[4]||(e[4]=s=>w.value=s),total:x.value.length,"page-sizes":[12,24,48,96],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:me,onCurrentChange:ge},null,8,["current-page","page-size","total"])])):S("",!0)])]),K.value.length>0?(o(),u("div",ns,[t("div",ls,[e[14]||(e[14]=t("div",{class:"section-header"},[t("h2",{class:"section-title"},"相关分类")],-1)),t("div",rs,[(o(!0),u(T,null,$(K.value,s=>(o(),u("div",{key:s.id,class:"related-card",onClick:Y=>H(s.id)},[t("div",cs,[n(N,{size:24,color:s.color},{default:i(()=>[(o(),C(M(s.icon)))]),_:2},1032,["color"])]),t("div",us,[t("h4",ds,d(s.name),1),t("span",_s,d(Q(s.id))+" 个工具 ",1)])],8,is))),128))])])])):S("",!0)])}}}),Ss=Oe(vs,[["__scopeId","data-v-cf50bee2"]]);export{Ss as default};
