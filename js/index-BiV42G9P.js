var fe=Object.defineProperty,me=Object.defineProperties;var he=Object.getOwnPropertyDescriptors;var oe=Object.getOwnPropertySymbols;var _e=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable;var ae=(h,c,o)=>c in h?fe(h,c,{enumerable:!0,configurable:!0,writable:!0,value:o}):h[c]=o,U=(h,c)=>{for(var o in c||(c={}))_e.call(c,o)&&ae(h,o,c[o]);if(oe)for(var o of oe(c))ve.call(c,o)&&ae(h,o,c[o]);return h},O=(h,c)=>me(h,he(c));import{b as ye,d as we,_ as Ce,u as be,w as ke,E as Q,m as Se,s as $e,a as De,c as Ie,e as H,f as le,g as ne,h as Ee,i as Ae,p as de,j as Be,k as Te,l as Ne,n as Pe,o as ze,q as Le}from"./_plugin-vue_export-helper-DAE0c8RX.js";/* empty css                        */import{E as Ve,a as qe}from"./el-input-B5lZdLQh.js";import{E as re,a as ie,b as ce,c as Me,d as Re}from"./el-skeleton-item-CzrWbPsQ.js";import{S as je}from"./SearchBox-Co8R4YEd.js";import{d as z,c as E,a as g,o as d,b as k,n as A,u as a,r as Fe,e as W,f as B,g as i,h as r,w as m,i as T,j as He,k as X,l as I,m as se,p as Ue,v as Z,t as q,F as ee,q as te,s as pe,x as ue,y as ge}from"./index-C8EcO_R4.js";import"./el-tooltip-l0sNRNKZ.js";import{u as Oe,a as Qe}from"./navigation-7vtA9nYp.js";const Ye=ye({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:we(String),default:"solid"}}),xe=z({name:"ElDivider"}),Ge=z(O(U({},xe),{props:Ye,setup(h){const c=h,o=be("divider"),n=E(()=>o.cssVar({"border-style":c.borderStyle}));return(p,f)=>(d(),g("div",{class:A([a(o).b(),a(o).m(p.direction)]),style:W(a(n)),role:"separator"},[p.$slots.default&&p.direction!=="vertical"?(d(),g("div",{key:0,class:A([a(o).e("text"),a(o).is(p.contentPosition)])},[Fe(p.$slots,"default")],2)):k("v-if",!0)],6))}}));var Je=Ce(Ge,[["__file","divider.vue"]]);const Ke=ke(Je),We="/ai-daohang/logo.svg",Xe={class:"app-header"},Ze={class:"header-left"},et={class:"header-center"},tt={class:"header-right"},ot=z({__name:"Header",emits:["toggleSidebar"],setup(h,{emit:c}){const o=He(),n=B(!1),p=c,f=()=>{p("toggleSidebar")},_=()=>{n.value=!n.value,document.documentElement.setAttribute("data-theme",n.value?"dark":"light")},w=()=>{o.push("/admin")};return($,y)=>{const D=Q,v=ce,S=ie,N=re;return d(),g("header",Xe,[i("div",Ze,[r(D,{type:"text",icon:a(Se),onClick:f,class:"sidebar-toggle"},null,8,["icon"]),y[0]||(y[0]=i("div",{class:"logo"},[i("img",{src:We,alt:"AI导航",class:"logo-img"}),i("span",{class:"logo-text"},"AI导航")],-1))]),i("div",et,[r(je)]),i("div",tt,[r(D,{type:"text",icon:a(n)?a($e):a(De),onClick:_,class:"theme-toggle"},null,8,["icon"]),r(N,null,{dropdown:m(()=>[r(S,null,{default:m(()=>[r(v,{onClick:w},{default:m(()=>y[1]||(y[1]=[T("管理后台")])),_:1,__:[1]}),r(v,{divided:""},{default:m(()=>y[2]||(y[2]=[T("关于我们")])),_:1,__:[2]})]),_:1})]),default:m(()=>[r(D,{type:"text",icon:a(Ie)},null,8,["icon"])]),_:1})])])}}}),at=H(ot,[["__scopeId","data-v-23e10550"]]),st=["draggable"],lt={key:1,class:"expand-placeholder"},nt={key:0,class:"node-icon"},dt={class:"node-info"},rt={class:"node-label"},it={key:0,class:"node-count"},ct={key:0,class:"node-children"},pt=z({__name:"CategoryTreeNode",props:{category:{},selectedId:{default:null},expandedIds:{},collapsed:{type:Boolean,default:!1},showCount:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!0},showActions:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},level:{}},emits:["select","expand","collapse","edit","delete","add-child","drag-start","drag-end","drop"],setup(h,{emit:c}){const o=h,n=c,p=B(!1),f=B(!1),_=B("before"),w=E(()=>o.category.children&&o.category.children.length>0),$=E(()=>o.expandedIds.has(o.category.id)),y=E(()=>0),D=()=>{o.category.isActive&&n("select",o.category.id)},v=()=>{w.value&&($.value?n("collapse",o.category.id):n("expand",o.category.id))},S=t=>{switch(t){case"add-child":n("add-child",o.category);break;case"edit":n("edit",o.category);break;case"delete":n("delete",o.category);break}},N=t=>{o.draggable&&(p.value=!0,n("drag-start",o.category),t.dataTransfer&&(t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text/plain",o.category.id)))},M=()=>{p.value=!1,f.value=!1,n("drag-end",o.category)},Y=t=>{if(!o.draggable)return;t.preventDefault(),t.stopPropagation(),t.dataTransfer&&(t.dataTransfer.dropEffect="move");const s=t.currentTarget.getBoundingClientRect(),b=t.clientY-s.top,L=s.height;b<L*.25?_.value="before":b>L*.75?_.value="after":_.value="inner",f.value=!0},x=t=>{var b;if(!o.draggable)return;t.preventDefault(),t.stopPropagation(),f.value=!1;const s=(b=t.dataTransfer)==null?void 0:b.getData("text/plain");s&&s!==o.category.id&&n("drop",o.category,o.category,_.value)};return(t,s)=>{const b=le,L=Q,R=ce,G=ie,J=re,K=Ve,e=pe("CategoryTreeNode",!0);return d(),g("div",{class:"tree-node",style:W({paddingLeft:`${t.level*20}px`})},[i("div",{class:A(["node-content",{active:t.selectedId===t.category.id,disabled:!t.category.isActive,dragging:a(p)}]),draggable:t.draggable,onClick:D,onDragstart:N,onDragend:M,onDragover:Y,onDrop:x},[i("div",{class:"node-expand",onClick:se(v,["stop"])},[a(w)?(d(),I(b,{key:0,class:A(["expand-icon",{expanded:a($)}])},{default:m(()=>[r(a(ne))]),_:1},8,["class"])):(d(),g("span",lt))]),t.showIcon&&!t.collapsed?(d(),g("div",nt,[t.category.icon?(d(),I(b,{key:0,style:W({color:t.category.color})},{default:m(()=>[(d(),I(Ue(t.category.icon)))]),_:1},8,["style"])):(d(),I(b,{key:1,class:"default-icon"},{default:m(()=>[r(a(Ee))]),_:1}))])):k("",!0),X(i("div",dt,[i("span",rt,q(t.category.name),1),t.showCount&&a(y)>0?(d(),g("span",it,q(a(y)),1)):k("",!0)],512),[[Z,!t.collapsed]]),t.showActions&&!t.collapsed?(d(),g("div",{key:1,class:"node-actions",onClick:s[0]||(s[0]=se(()=>{},["stop"]))},[r(J,{onCommand:S,trigger:"click"},{dropdown:m(()=>[r(G,null,{default:m(()=>[r(R,{command:"add-child",icon:a(de)},{default:m(()=>s[10]||(s[10]=[T("添加子分类")])),_:1,__:[10]},8,["icon"]),r(R,{command:"edit",icon:a(Be)},{default:m(()=>s[11]||(s[11]=[T("编辑")])),_:1,__:[11]},8,["icon"]),r(R,{command:"delete",icon:a(Te),divided:""},{default:m(()=>s[12]||(s[12]=[T("删除")])),_:1,__:[12]},8,["icon"])]),_:1})]),default:m(()=>[r(L,{type:"text",icon:a(Ae),size:"small",class:"action-btn"},null,8,["icon"])]),_:1})])):k("",!0),t.collapsed?(d(),I(K,{key:2,content:t.category.name,placement:"right"},{default:m(()=>s[13]||(s[13]=[i("div",{class:"collapsed-indicator"},null,-1)])),_:1,__:[13]},8,["content"])):k("",!0)],42,st),a(w)&&a($)?(d(),g("div",ct,[(d(!0),g(ee,null,te(t.category.children,u=>(d(),I(e,{key:u.id,category:u,"selected-id":t.selectedId,"expanded-ids":t.expandedIds,collapsed:t.collapsed,"show-count":t.showCount,"show-icon":t.showIcon,"show-actions":t.showActions,draggable:t.draggable,level:t.level+1,onSelect:s[1]||(s[1]=l=>t.$emit("select",l)),onExpand:s[2]||(s[2]=l=>t.$emit("expand",l)),onCollapse:s[3]||(s[3]=l=>t.$emit("collapse",l)),onEdit:s[4]||(s[4]=l=>t.$emit("edit",l)),onDelete:s[5]||(s[5]=l=>t.$emit("delete",l)),onAddChild:s[6]||(s[6]=l=>t.$emit("add-child",l)),onDragStart:s[7]||(s[7]=l=>t.$emit("drag-start",l)),onDragEnd:s[8]||(s[8]=l=>t.$emit("drag-end",l)),onDrop:s[9]||(s[9]=l=>t.$emit("drop",l))},null,8,["category","selected-id","expanded-ids","collapsed","show-count","show-icon","show-actions","draggable","level"]))),128))])):k("",!0),a(f)?(d(),g("div",{key:1,class:A(["drop-indicator",a(_)])},null,2)):k("",!0)],4)}}}),ut=H(pt,[["__scopeId","data-v-3d7adfda"]]),gt={class:"category-tree"},ft={key:0,class:"tree-search"},mt={key:0,class:"tree-count"},ht={class:"tree-container"},_t={key:0,class:"tree-loading"},vt={key:1,class:"tree-empty"},yt={class:"empty-text"},wt={key:2,class:"tree-list"},Ct={key:2,class:"tree-actions"},bt=z({__name:"CategoryTree",props:{categories:{},selectedId:{default:null},loading:{type:Boolean,default:!1},collapsed:{type:Boolean,default:!1},showSearch:{type:Boolean,default:!0},showAll:{type:Boolean,default:!0},showCount:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!0},showActions:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},searchPlaceholder:{default:"搜索分类..."},totalCount:{default:0}},emits:["select","expand","collapse","edit","delete","add","add-child","drag-start","drag-end","drop"],setup(h,{emit:c}){const o=h,n=c,p=B(""),f=B(new Set),_=B(null),w=E(()=>{if(!p.value)return $(o.categories);const e=p.value.toLowerCase();return o.categories.filter(u=>{var l;return u.name.toLowerCase().includes(e)||((l=u.description)==null?void 0:l.toLowerCase().includes(e))}).map(u=>O(U({},u),{children:[]}))}),$=(e,u=null)=>e.filter(l=>l.parentId===u).sort((l,C)=>l.order-C.order).map(l=>O(U({},l),{children:$(e,l.id)})),y=e=>{p.value=e,e&&v()},D=()=>{p.value=""},v=()=>{const e=p.value.toLowerCase(),u=new Set;o.categories.forEach(l=>{var C;if(l.name.toLowerCase().includes(e)||(C=l.description)!=null&&C.toLowerCase().includes(e)){u.add(l.id);let P=l.parentId;for(;P;){f.value.add(P);const j=o.categories.find(F=>F.id===P);P=(j==null?void 0:j.parentId)||null}}})},S=()=>{n("select",null)},N=e=>{n("select",e)},M=e=>{f.value.add(e),n("expand",e)},Y=e=>{f.value.delete(e),n("collapse",e)},x=e=>{n("edit",e)},t=e=>{n("delete",e)},s=()=>{n("add")},b=e=>{n("add-child",e)},L=e=>{_.value=e,n("drag-start",e)},R=e=>{_.value=null,n("drag-end",e)},G=(e,u)=>{_.value&&n("drop",_.value,e,u)},J=()=>{const e=new Set,u=l=>{l.forEach(C=>{C.children&&C.children.length>0&&(e.add(C.id),u(C.children))})};u(w.value),f.value=e},K=()=>{f.value.clear()};return ue(()=>{o.collapsed||w.value.forEach(e=>{e.children&&e.children.length>0&&f.value.add(e.id)})}),(e,u)=>{const l=qe,C=le,P=Re,j=Me,F=Q;return d(),g("div",gt,[e.showSearch?(d(),g("div",ft,[r(l,{modelValue:a(p),"onUpdate:modelValue":u[0]||(u[0]=V=>ge(p)?p.value=V:null),placeholder:e.searchPlaceholder,"prefix-icon":a(Ne),clearable:"",size:"small",onInput:y,onClear:D},null,8,["modelValue","placeholder","prefix-icon"])])):k("",!0),e.showAll?(d(),g("div",{key:1,class:A(["tree-all-item",{active:e.selectedId===null}]),onClick:S},[r(C,{class:"tree-icon"},{default:m(()=>[r(a(Pe))]),_:1}),u[1]||(u[1]=i("span",{class:"tree-label"},"全部分类",-1)),e.showCount?(d(),g("span",mt,q(e.totalCount),1)):k("",!0)],2)):k("",!0),i("div",ht,[e.loading?(d(),g("div",_t,[r(j,{animated:""},{template:m(()=>[(d(),g(ee,null,te(5,V=>i("div",{key:V,class:"skeleton-item"},[r(P,{variant:"circle",style:{width:"16px",height:"16px"}}),r(P,{variant:"text",style:{width:"60%",height:"16px","margin-left":"8px"}})])),64))]),_:1})])):a(w).length===0?(d(),g("div",vt,[r(C,{class:"empty-icon"},{default:m(()=>[r(a(ze))]),_:1}),i("span",yt,q(a(p)?"未找到匹配的分类":"暂无分类数据"),1)])):(d(),g("div",wt,[(d(!0),g(ee,null,te(a(w),V=>(d(),I(ut,{key:V.id,category:V,"selected-id":e.selectedId,"expanded-ids":a(f),collapsed:e.collapsed,"show-count":e.showCount,"show-icon":e.showIcon,"show-actions":e.showActions,draggable:e.draggable,level:0,onSelect:N,onExpand:M,onCollapse:Y,onEdit:x,onDelete:t,onAddChild:b,onDragStart:L,onDragEnd:R,onDrop:G},null,8,["category","selected-id","expanded-ids","collapsed","show-count","show-icon","show-actions","draggable"]))),128))]))]),e.showActions?(d(),g("div",Ct,[r(F,{type:"primary",icon:a(de),size:"small",onClick:s},{default:m(()=>u[2]||(u[2]=[T(" 添加分类 ")])),_:1,__:[2]},8,["icon"]),a(f).size>0?(d(),I(F,{key:0,type:"text",size:"small",onClick:K},{default:m(()=>u[3]||(u[3]=[T(" 收起全部 ")])),_:1,__:[3]})):(d(),I(F,{key:1,type:"text",size:"small",onClick:J},{default:m(()=>u[4]||(u[4]=[T(" 展开全部 ")])),_:1,__:[4]}))])):k("",!0)])}}}),kt=H(bt,[["__scopeId","data-v-29e1eae8"]]),St={class:"sidebar-header"},$t={class:"sidebar-content"},Dt={class:"sidebar-footer"},It={class:"stats"},Et={class:"stat-item"},At={class:"stat-value"},Bt={class:"stat-item"},Tt={class:"stat-value"},Nt=z({__name:"Sidebar",props:{collapsed:{type:Boolean,default:!1}},emits:["update:collapsed"],setup(h,{emit:c}){const o=h,n=c,p=Oe(),f=Qe(),_=E(()=>p.categories),w=E(()=>p.totalCount),$=E(()=>f.totalCount),y=()=>{n("update:collapsed",!o.collapsed)},D=v=>{console.log("Selected category:",v)};return ue(()=>{p.fetchCategories(),f.fetchNavigations()}),(v,S)=>{const N=Q,M=Ke;return d(),g("aside",{class:A(["app-sidebar",{collapsed:v.collapsed}])},[i("div",St,[X(i("h3",null,"分类导航",512),[[Z,!v.collapsed]]),r(N,{type:"text",icon:v.collapsed?a(ne):a(Le),onClick:y,class:"collapse-btn"},null,8,["icon"])]),i("div",$t,[r(kt,{categories:a(_),collapsed:v.collapsed,onSelect:D},null,8,["categories","collapsed"])]),X(i("div",Dt,[r(M),i("div",It,[i("div",Et,[S[0]||(S[0]=i("span",{class:"stat-label"},"总分类",-1)),i("span",At,q(a(w)),1)]),i("div",Bt,[S[1]||(S[1]=i("span",{class:"stat-label"},"总导航",-1)),i("span",Tt,q(a($)),1)])])],512),[[Z,!v.collapsed]])],2)}}}),Pt=H(Nt,[["__scopeId","data-v-9dff0eb8"]]),zt={class:"app-layout"},Lt={class:"layout-container"},Vt=z({__name:"index",setup(h){const c=B(!1);return(o,n)=>{const p=pe("router-view");return d(),g("div",zt,[r(at),i("div",Lt,[r(Pt,{collapsed:a(c),"onUpdate:collapsed":n[0]||(n[0]=f=>ge(c)?c.value=f:null)},null,8,["collapsed"]),i("main",{class:A(["main-content",{"sidebar-collapsed":a(c)}])},[r(p)],2)])])}}}),Yt=H(Vt,[["__scopeId","data-v-af5f29d7"]]);export{Yt as default};
